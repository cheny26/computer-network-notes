# 网络的网络

## 基本介绍

+ 网络是由若干**结点**和连接这些结点的**链路**组成。

  <img src="https://chen-y-1311235303.cos.ap-guangzhou.myqcloud.com/MyDraw/202308281823947.png" alt="image-20230828182341720" style="zoom: 50%;" />

+ 互联网实际上是由数十亿个小型网络组成的，这些小型网络连接了全世界的计算机设备。它们通过一系列的路由器、服务器和其他硬件设施连接在一起，形成了一个复杂而庞大的网络系统。所以也称为”**网络的网络**“。

+ 因特网，也被称为互联网，是一种全球性的计算机网络系统，它将全世界数以亿计的计算机设备，如个人计算机、服务器、移动设备等连接在一起。它是基于TCP/IP（传输控制协议/互联网协议）技术的网络通信模型以及许多其他网络基础设施的标准化系统构建的。





## Internet 和 internet

+ **internet**：小写的"internet"是一个通用术语，用来描述任何连接在一起的网络组。这个词源于"interconnected networks"，意味着它**可以用来描述任何类型和规模的网络，只要它们通过某种方式连接在一起。**

+ **Internet**：大写的"Internet"则用来**专指全球性的计算机网络系统**，这个系统连接了全世界的计算机和其他设备。这个系统是**基于TCP/IP协议构建**的，支持各种服务，如电子邮件、网页浏览、文件传输等。当我们在日常生活中提到"上网"时，我们通常是指访问"Internet"。



## 网络的发展

<img src="https://chen-y-1311235303.cos.ap-guangzhou.myqcloud.com/MyDraw/202312102317582.png" alt="image-20231210231720557" style="zoom: 80%;" />



**ISP（Internet Service Provider）**是指互联网服务提供商。互联网服务提供商是一家为用户提供上网服务的公司或组织。

互联网服务提供商扮演着连接个人、家庭和企业到互联网的角色。他们通过不同的技术（例如光纤、DSL、电缆、卫星等）向用户提供互联网接入服务。用户通过ISP能够访问全球范围的互联网资源，包括网页、电子邮件、文件传输和多媒体内容等。

ISP的主要功能包括：

1. **互联网接入服务：** 提供用户与互联网之间的连接，使用户能够通过计算机、智能手机、平板电脑等设备访问互联网。
2. **IP地址分配：** 为用户分配唯一的IP地址，以便在互联网上识别和定位用户设备。
3. 网络管理和维护： 管理和维护网络基础设施，确保用户能够稳定、安全地访问互联网。
4. 提供额外服务：一些ISP可能提供额外的服务，如电子邮件、虚拟专用网络（VPN）、域名注册等。
5. 技术支持：为用户提供技术支持，解决与互联网连接和服务有关的问题。

<img src="https://chen-y-1311235303.cos.ap-guangzhou.myqcloud.com/MyDraw/202312102336093.png" alt="image-20231210233644968" style="zoom:67%;" />





# 计算机网络基本概念

## 定义

1. 计算机网络是一个将分散的，**具有独立的计算机系统**，通过**通信设备与线路连接**起来，由功能完善的软件实现**资源共享和信息传递**的系统

2. 计算机网络是**互连**的，**自治**的**计算机集合**

   > 互连：计算机之间可以通过有线或无线的方式进行数据通信
   >
   > 自治：独立的计算机，有自己的硬件和软件，可以单独运行使用
   >
   > 集合：至少需要两台计算机



## 功能

1. **数据通信：**机算机网络中可以实现计算机与计算机之间的数据传送，例如文字、图片、音频、视频等

2. **资源共享：**是指网络中的用户都能够部分或全部地享受网络中的数据、软件和硬件资源，例如数据库、打印机、网盘等
3. 提高可靠性：通过网络中的备份和冗余机制，可以保证数据的安全和完整，避免因为单个设备的故障而导致的数据丢失或服务中断。
4. 实现负载均衡：通过网络中的分布式和并行处理，可以提高系统的效率和性能，避免因为某个节点的过载而影响整个网络的运行。
5. 支持分布式处理：通过网络中的协同和协作，可以实现不同地点和不同时间的用户之间的信息交换和任务协调，提高工作的效率和质量。



## 组成

1. 按组成部分划分：由硬件，软件，协议等组成

2. 按**工作方式**划分：

   + **边缘部分**

     > 1. **主要包括连接到网络的所有终端设备，这些设备通常被称为主机**。包括如个人电脑、智能手机、服务器等。
     >
     > 2. **主要功能是生成、接收和 处理数据**。例如，当你在你的电脑上浏览网页时，你的电脑（作为一个主机）就在网络的边缘生成HTTP请求，然后通过网络将这些请求发送到服务器。

   + **核心部分**

     > 1. **主要包括一系列的路由器和高速数据链路**，这些设备和链路负责在网络中转发数据。这一部分的设备通常位于ISP或者大型数据中心。
     >
     > 2. **主要功能是路由和交换数据**。路由器会根据数据包的目的地，决定将数据包发送到哪个链接的网络。这个过程是动态的，路由器会根据网络的状态（例如，链路的拥塞情况）来动态调整路由路径。

   <img src="https://chen-y-1311235303.cos.ap-guangzhou.myqcloud.com/MyDraw/202308281849565.png" alt="image-20230828184927683" style="zoom: 50%;" />

3. 按**功能组成**划分

   + **通信子网**

     > 1. 实现**数据通信**功能，它由各种**网络通信设备**（如路由器、交换机等）和**通信线路**组成
     > 2. 负责在网络中传输、转接、加工和交换数据
     > 3. 主要解决数据在不同节点之间的传输问题

   + **资源子网**

     > 1. 实现**资源共享**功能的部分，它由各种**网络资源设备**（如服务器、用户计算机等）和**相关软件**组成
     > 2. 负责在网络中处理、管理和提供数据
     > 3. 主要解决数据的应用问题

   <img src="https://chen-y-1311235303.cos.ap-guangzhou.myqcloud.com/MyDraw/202312101448631.png" alt="image-20231210144826570" style="zoom: 67%;" />



## 分类

+ 按**交换技术**分类
  1. 电路交换网络
  2. 报文交换网络
  3. 分组交换网络



+ 按使用者分类
  1. 公用网：为公众用户提供的网络，如互联网
  2. 专用网：为特定组织或机构提供的私有网络，如企业内部的局域网



+ 按**传输技术**分类
  1. 广播式网络：共享公共通信信道
  2. 点对点网络：使用分组存储转发和路由选择机制



+ 按传输介质分类
  1. 有线网：通过物理线路（如双绞线、光纤、同轴电缆）进行数据传输的网络
  2. 无线网：通过无线电波（如 WI-FI、蓝牙、4G、5G等）进行数据传输的网络



+ 按**覆盖范围**分类
  1. 广域网（WAN）：覆盖范围广，可能跨越多个城市甚至国家，如互联网
  2. 城域网（MAN）：覆盖一个城市的范围，如城市的电视网络
  3. 局域网（LAN）：覆盖范围局限在一定的小区域，如校园网
  4. 个域网（PAN）：覆盖范围更小，一般局限在个人周围的范围，如一个家庭的智能家居网络



+ 按**拓扑结构**分类

  1. 总线型网络：所有设备都连接到一条主线（或总线）上

     <img src="https://chen-y-1311235303.cos.ap-guangzhou.myqcloud.com/MyDraw/202308202037918.png" alt="image-20230820203739653" style="zoom: 67%;" />

  2. 星型网络：所有设备都直接连接到一个中心点，如一个路由器

     <img src="https://chen-y-1311235303.cos.ap-guangzhou.myqcloud.com/MyDraw/202308202038953.png" alt="image-20230820203823286" style="zoom:67%;" />

  3. 环型网络：设备按照环形进行连接，**数据在环中按一定的方向传输**

     <img src="https://chen-y-1311235303.cos.ap-guangzhou.myqcloud.com/MyDraw/202308202039214.png" alt="image-20230820203933787" style="zoom:67%;" />

  4. 网状型网络：设备间有多条路径可供选择，提供了更高的可靠性和灵活性，如互联网

     <img src="https://chen-y-1311235303.cos.ap-guangzhou.myqcloud.com/MyDraw/202308202040090.png" alt="image-20230820204034994" style="zoom: 50%;" />

  



# 三种交换方式

## 	电路交换

- **定义**：电路交换是一种在通信会话期间为数据传输**建立专用物理通道**的技术。当通信开始时，会在发送方和接收方之间建立一条专用的通信路径，这条路径在通信过程中一直保持，直到通信结束。
- **优点**：一旦建立了连接，数据传输的延迟和带宽就是固定的，没有缓冲延迟，因此为实时服务（如电话会议或视频会议）提供了良好的服务质量。
- **缺点**：资源利用率较低，因为即使没有数据传输，连接也会一直占用网络资源。此外，建立连接可能需要较长的时间。
- **典型应用**：传统的电话系统是电路交换的一个典型应用。

<img src="https://chen-y-1311235303.cos.ap-guangzhou.myqcloud.com/MyDraw/202308201643995.png" alt="image-20230820164314457" style="zoom: 67%;" />



## 	报文交换

- **定义**：报文交换是一种没有专用物理通道的交换方式。它将整个消息（称为"报文"）作为一个单元进行传输。每个报文都包含有目的地的地址，使得网络节点可以将报文转发到下一个节点，直到报文到达目的地。
- **优点**：报文交换允许网络资源在需要时进行动态分配，从而提高了资源的利用率。
- **缺点**：报文交换可能会引入较大的延迟，因为每个报文都需要在每个节点上存储和转发。此外，如果报文过大，可能需要大量的存储空间和带宽。
- **典型应用**：电子邮件系统是报文交换的一个典型应用。

<img src="https://chen-y-1311235303.cos.ap-guangzhou.myqcloud.com/MyDraw/202308201649589.png" alt="image-20230820164855150" style="zoom:67%;" />



## 	分组交换

- **定义**：分组交换是一种将数据划分为小的数据包（称为“分组”）进行传输的交换方式。每个分组都包含有源地址、目的地址和序列号，使得分组可以独立地在网络中传输，并在到达目的地后重新组装。
- **优点**：分组交换提供了更高的网络资源利用率和更低的延迟，因为分组可以独立地以不同的路径传输。此外，它对网络拥塞有更好的容忍性，因为如果一条路径拥塞，数据可以选择其他的路径。
- **缺点**：分组交换需要复杂的协议来处理分组的分割、组装、排序和错误检测。此外，如果网络严重拥塞，部分分组可能会丢失，需要重传。
- **典型应用**：互联网是分组交换的一个典型应用，其中最重要的协议 TCP/IP 就使用了分组交换。

<img src="https://chen-y-1311235303.cos.ap-guangzhou.myqcloud.com/MyDraw/202308201649151.png" alt="image-20230820164935360" style="zoom:67%;" />





# 性能指标

##  速率

- **定义**：速率是网络在**单位时间内传输数据的能力，**通常以比特每秒（bps，b/s）为单位。
- **举例理解**：可以将其理解为汽车的速度。如果汽车的速度是60英里每小时，那么一小时后，汽车可以行驶60英里。同样，如果网络的速率是60 Mbps，那么一秒钟后，可以传输60 Mb的数据。

常用数据量单位：

**1B=8 bit、1KB=2^10^B、1MB=2^10^KB、1GB=2^10^MB、1TB=2^10^GB**

常用速率单位：

**bit/s（b/s，bps）、kb/s=10^3^b/s、Mb/s=10^3^kb/s、Gb/s=10^3^Mb/s、Tb/s=10^3^Gb/s**



## 带宽

- **定义**：带宽是网络在**单位时间内可以传输的最大数据量，**通常以比特每秒（bps）为单位。
- **举例理解**：带宽可以理解为一条道路的宽度或者水管的直径。道路或水管越宽，同时通过的汽车或水流就越多。



## 吞吐量

- **定义**：吞吐量是指在**特定的网络条件下，单位时间内实际成功传输的数据量。**
- **举例理解**：可以将吞吐量比作一个超市的结算速度，一个超市可能能够容纳1000个顾客，但如果结账台的数量和效率不足，那么在单位时间内实际能够结算出去的顾客数量就会小于1000。这个“实际能够结算出去的顾客数量”就类似于网络的吞吐量。



## 时延

- **定义**：时延是指**数据从发送端到达接收端所需的时间。**

- **举例理解**：可以将时延比作寄一封信所需的时间。从寄出信件到收信人收到信件，这个过程的时间就是时延。

- **时延=发送时延+传播时延**+处理时延+排队时延。(后面两个时延难以计算)

  **传播时延**

  - **定义**：**数据包在链路上从发送端传播到接收端所需的时间**。这通常取决于传播介质（如光纤，电缆）和传播距离。
  - **计算方式**：传播延迟 = 链路长度 / 电磁波在介质中的传播速度
  - 真空中，电磁波（如光）的传播速度约为3x10^8^/s；铜线中，传播速度约为2.3x10^8^ m/s光纤中，传播速度约为2x10^8^m/s。

  

  **发送时延**

  - **定义**：**数据包被发送端完全放入链路所需的时间**。这取决于数据包的大小和链路的带宽。
  - **计算方式**：发送延迟 = 数据包大小 / 链路带宽

  

  **处理时延**

  - **定义**：**网络设备（如路由器）处理数据包所需的时间**，包括查看包头以决定将包发送到哪里，检查错误等。

  

  **排队时延**

  - **定义**：**数据包在网络设备中等待处理和发送的时间**。这主要取决于网络设备的负载和数据包的优先级。

  > 在实际的网络环境中，处理延迟和排队延迟通常很难准确计算。
  >
  > **处理延迟**：这需要知道网络设备（如路由器、交换机）的具体性能以及正在处理的任务数量等信息。这些信息通常并不公开，而且即使知道了，由于网络设备的工作状态可能会随着时间、网络负载等因素的变化而变化，因此很难准确计算。
  >
  > **排队延迟**：这取决于网络设备的负载情况，包括正在处理的数据包的数量、数据包的优先级等因素。这些信息也通常并不公开，而且可能会随着时间、网络负载等因素的变化而变化，因此也很难准确计算。



## 时延带宽积

- **定义**：时延带宽积是网络的**传播延迟与带宽的乘积**，用于量化在高带宽或高延迟的网络中，任何一个时间点上未确认的、在途的数据量。
- **举例理解**：可以理解为一条路上的汽车数量。这个数量是由道路长度（延迟）和道路宽度（带宽）决定的。如果道路很长或很宽，那么道路上的汽车就可能很多。



## 往返时间

- **定义**：往返时间是数据包从发送端发送到接收端，然后从接收端返回发送端的总时间。
- **举例理解**：可以将其比作去邮局寄信。从你家（发送端）到邮局（接收端）再返回你家的总时间就是往返时间。



## 利用率

- **定义**：利用率是指网络资源被使用的程度。信道利用率：表示某信道有百分之几的时间是被利用的。网络利用率：全网络的信道利用率的加权平均。
- **举例理解**：可以将其比作一个酒店的房间利用率。如果酒店有100个房间，而在某一时间有80个房间被使用，那么酒店的房间利用率就是80%。
- 利用率并非越高越好，当某信道的利用率增大时，该信道引起的时延也会迅速增加，也不能使信道利用率太低，会使宝贵的通信资源被白白浪费。

如果用D~o~表示网络空闲时的时延，D表示当前的时延，那么在适当的假定条件下，可以用下面的简单公式来表示D、D~0~和利用率U之间的关系：
$$
D = \frac{Do}{1 - U}
$$

<img src="https://chen-y-1311235303.cos.ap-guangzhou.myqcloud.com/MyDraw/202308201857145.png" alt="image-20230820185656767" style="zoom: 50%;" />

> 一些拥有较大主干网的 ISP 会控制他们的信道利用率不超过50%，如果超过了，就要准备扩容，增大线路的带宽



## 丢包率

- **定义**：丢包率是指在数据传输过程中，由于各种原因（如网络拥塞,分组误码）而未能到达目的地的数据包的比例。
- **举例理解**：可以将其比作邮局在寄送100封信件时，有1封信件丢失的情况。在这种情况下，丢包率就是1%。





# 体系结构与参考模型

 



## 	OSI参考模型

1. **OSI参考模型**是开放式系统互联参考模型（Open System Interconnection Reference Model）的简称，是国际标准化组织（ISO）提出的一个试图使各种计算机在世界范围内互连为网络的标准框架。
2. 一种**理论模型**,概念清楚，理论完整，但是复杂、不实用。

<img src="https://chen-y-1311235303.cos.ap-guangzhou.myqcloud.com/MyDraw/202312101633892.png" alt="image-20231210163341060" style="zoom: 80%;" />





## TCP/IP 参考模型

1. **TCP/IP参考模型**是传输控制协议/网际协议（Transmission Control Protocol/Internet Protocol）的简称，是美国国防部提出的一组协议的代名词，它包括许多协议，组成了TCP/IP协议簇。
2. 一个更**实际的模型**，是 Internet的核心协议，被广泛应用于局域网和广域网。

![image-20231210165202341](https://chen-y-1311235303.cos.ap-guangzhou.myqcloud.com/MyDraw/202312101652683.png)







## 五层参考模型

> 综合了 OSI 与 TCP / IP的优点，**目的是为了学习和讲解计算机网络原理**。

<img src="https://chen-y-1311235303.cos.ap-guangzhou.myqcloud.com/MyDraw/202312112231837.png" alt="Snipaste_2023-12-11_22-27-06" style="zoom: 80%;" />



**五层参考模型的数据封装与解封装**

<img src="https://chen-y-1311235303.cos.ap-guangzhou.myqcloud.com/MyDraw/202312112218756.png" alt="image-20231211221806563" style="zoom: 80%;" />



## 各参考模型对比

| 参考模型     | 适用范围 | 设计顺序     | 分层数目 | 分层功能   | 服务和协议 | 传输层可靠性 |
| :----------- | :------- | :----------- | :------- | :--------- | :--------- | :----------- |
| OSI模型      | 各种网络 | 先模型后协议 | 七层     | 详细和明确 | 明确区分   | 可保证       |
| TCP/IP模型   | 互联网   | 先协议后模型 | 四层     | 简单和模糊 | 没有区分   | 不可保证     |
| 五层参考模型 | 互联网   | 先协议后模型 | 五层     | 简单和模糊 | 没有区分   | 不可保证     |



| 层次   | OSI模型         | TCP/IP模型                    |
| :----- | :-------------- | :---------------------------- |
| 网络层 | 无连接+面向连接 | 无连接                        |
| 传输层 | 面向连接        | 无连接（UDP）+面向连接（TCP） |

+ **无连接**的通信是指发送方**不需要建立和维护连接**，直接将数据包发送到目的地，**不保证数据的可靠性和顺序**，适用于实时性要求高的应用，如视频、音频等。
+ **面向连接**的通信是指发送方**需要先与接收方建立连接**，然后按照连接的规则进行数据的传输和控制，**保证数据的可靠性和顺序**，适用于要求数据完整的应用，如文件传输、远程登录等。



## 专业术语

+ **实体：**任何可以发送或接收信息的硬件或软件进程。

+ **对等实体：**收发双方**相同层次中的实体**。

  <img src="https://chen-y-1311235303.cos.ap-guangzhou.myqcloud.com/MyDraw/image-20230829125434394.png" alt="image-20230829125434394" style="zoom: 33%;" />



+ **协议：**控制两个**对等实体进行逻辑通信的规则的集合**。

  <img src="https://chen-y-1311235303.cos.ap-guangzhou.myqcloud.com/MyDraw/202308291255066.png" alt="image-20230829125525698" style="zoom: 33%;" />

  协议三要素：

  + 语法：定义所交换信息的格式。
  + 语义：定义收发双方所要完成的操作。
  + 同步：定义收发双发的时序关系。



+ **服务**

  + 在协议的控制下，两个对等实体间的逻辑通信使得本层能够**向上一层提供功能调用**。
  + 要实现本层协议，还需要使用下面一层所提供的的服务。
  + **协议是水平的，服务是垂直的。**
  + 下面的协议对于上面的实体来说是透明的

  <img src="https://chen-y-1311235303.cos.ap-guangzhou.myqcloud.com/MyDraw/202308291300684.png" alt="image-20230829130020831" style="zoom: 33%;" />

+ **服务访问点：**在同一系统中**相邻两层的实体交换信息的逻辑接口，**用于区分不同的服务类型。

  + 数据链路层的服务访问点为帧的类型字段。
  + 网络层的服务访问点为 IP 数据报首部中的协议字段。
  + 运输层的服务访问点为端口号。

+ **服务原语：**上层使用下层所提供的服务必须通过与下一层交换一些命令，这些命令称为服务原语。



+ **协议数据单元 PDU：对等层次之间传送的数据包**称为该层的协议数据单元。

  <img src="https://chen-y-1311235303.cos.ap-guangzhou.myqcloud.com/MyDraw/202308291342210.png" alt="image-20230829134239699" style="zoom: 33%;" />

+ **服务数据单元 SDU：同一系统内，层与层之间交换的数据包**称为服务数据单元。

  多个 SDU 可以合成为一个PDU，一个 SDU 也可以划分为多个·PDU。

  <img src="https://chen-y-1311235303.cos.ap-guangzhou.myqcloud.com/MyDraw/202308291345034.png" alt="image-20230829134543992" style="zoom: 33%;" />
